{
  "info": {
    "_postman_id": "dea021bb-3234-44e9-87b7-13d2ebeff672",
    "name": "Ejemplo de depuracion de api",
    "description": "Colección con TODOS los ejemplos: Crear, Leer, Actualizar, Eliminar para Clientes, Productos, Órdenes y Detalles",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "35386136"
  },
  "item": [
    {
      "name": "CLIENTES",
      "item": [
        {
          "name": "POST - Crear Cliente",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"clienteId\":\"TEST-001\",\"nombre\":\"Juan Pérez\",\"identidad\":\"123456789\"}"
            },
            "url": {
              "raw": "http://localhost:3000/api/clientes",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "3000",
              "path": [
                "api",
                "clientes"
              ]
            }
          },
          "response": []
        },
        {
          "name": "GET - Obtener Todos los Clientes",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:3000/api/clientes",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "3000",
              "path": [
                "api",
                "clientes"
              ]
            }
          },
          "response": []
        },
        {
          "name": "GET - Obtener Cliente por ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:3000/api/clientes/TEST-001",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "3000",
              "path": [
                "api",
                "clientes",
                "TEST-001"
              ]
            }
          },
          "response": []
        },
        {
          "name": "PUT - Actualizar Cliente",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"clienteId\":\"TEST-001\",\"nombre\":\"Juan Carlos Pérez\",\"identidad\":\"987654321\"}"
            },
            "url": {
              "raw": "http://localhost:3000/api/clientes/TEST-001",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "3000",
              "path": [
                "api",
                "clientes",
                "TEST-001"
              ]
            }
          },
          "response": []
        },
        {
          "name": "DELETE - Eliminar Cliente",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "http://localhost:3000/api/clientes/TEST-001",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "3000",
              "path": [
                "api",
                "clientes",
                "TEST-001"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "PRODUCTOS",
      "item": [
        {
          "name": "POST - Crear Producto",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"productoId\":\"PROD-001\",\"nombre\":\"Laptop Dell\",\"precio\":1200,\"exitencia\":5}"
            },
            "url": {
              "raw": "http://localhost:3000/api/productos",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "3000",
              "path": [
                "api",
                "productos"
              ]
            }
          },
          "response": []
        },
        {
          "name": "GET - Obtener Todos los Productos",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:3000/api/productos",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "3000",
              "path": [
                "api",
                "productos"
              ]
            }
          },
          "response": []
        },
        {
          "name": "GET - Obtener Producto por ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:3000/api/productos/PROD-001",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "3000",
              "path": [
                "api",
                "productos",
                "PROD-001"
              ]
            }
          },
          "response": []
        },
        {
          "name": "PUT - Actualizar Producto",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"productoId\":\"PROD-001\",\"nombre\":\"Laptop Dell XPS\",\"precio\":1300,\"exitencia\":3}"
            },
            "url": {
              "raw": "http://localhost:3000/api/productos/PROD-001",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "3000",
              "path": [
                "api",
                "productos",
                "PROD-001"
              ]
            }
          },
          "response": []
        },
        {
          "name": "DELETE - Eliminar Producto",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "http://localhost:3000/api/productos/PROD-001",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "3000",
              "path": [
                "api",
                "productos",
                "PROD-001"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "ÓRDENES",
      "item": [
        {
          "name": "POST - Crear Orden",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"ordenId\":\"ORD-001\",\"clienteId\":\"TEST-001\",\"subtotal\":0,\"impuesto\":0,\"total\":0}"
            },
            "url": {
              "raw": "http://localhost:3000/api/ordenes",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "3000",
              "path": [
                "api",
                "ordenes"
              ]
            }
          },
          "response": []
        },
        {
          "name": "GET - Obtener Todas las Órdenes",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:3000/api/ordenes",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "3000",
              "path": [
                "api",
                "ordenes"
              ]
            }
          },
          "response": []
        },
        {
          "name": "GET - Obtener Orden por ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:3000/api/ordenes/ORD-001",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "3000",
              "path": [
                "api",
                "ordenes",
                "ORD-001"
              ]
            }
          },
          "response": []
        },
        {
          "name": "PUT - Actualizar Orden",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"ordenId\":\"ORD-001\",\"clienteId\":\"TEST-002\",\"subtotal\":0,\"impuesto\":0,\"total\":0}"
            },
            "url": {
              "raw": "http://localhost:3000/api/ordenes/ORD-001",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "3000",
              "path": [
                "api",
                "ordenes",
                "ORD-001"
              ]
            }
          },
          "response": []
        },
        {
          "name": "DELETE - Eliminar Orden",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "http://localhost:3000/api/ordenes/ORD-001",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "3000",
              "path": [
                "api",
                "ordenes",
                "ORD-001"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "DETALLES DE ÓRDENES",
      "item": [
        {
          "name": "POST - Agregar Producto a Orden",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"cantidad\":1}"
            },
            "url": {
              "raw": "http://localhost:3000/api/ordenes/ORD-001/productos/PROD-001",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "3000",
              "path": [
                "api",
                "ordenes",
                "ORD-001",
                "productos",
                "PROD-001"
              ]
            }
          },
          "response": []
        },
        {
          "name": "GET - Ver Detalles de una Orden",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:3000/api/ordenes/ORD-001/detalles",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "3000",
              "path": [
                "api",
                "ordenes",
                "ORD-001",
                "detalles"
              ]
            }
          },
          "response": []
        },
        {
          "name": "GET - Ver Todos los Detalles (Admin)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:3000/api/detalles",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "3000",
              "path": [
                "api",
                "detalles"
              ]
            }
          },
          "response": []
        },
        {
          "name": "PUT - Actualizar Cantidad en Detalle",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"cantidad\":3}"
            },
            "url": {
              "raw": "http://localhost:3000/api/detalles/DET-XXXXX",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "3000",
              "path": [
                "api",
                "detalles",
                "DET-XXXXX"
              ]
            }
          },
          "response": []
        },
        {
          "name": "DELETE - Remover Producto de Orden",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "http://localhost:3000/api/detalles/DET-XXXXX",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "3000",
              "path": [
                "api",
                "detalles",
                "DET-XXXXX"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "FLUJO COMPLETO DE PRUEBA",
      "item": [
        {
          "name": "Paso 1: Crear Cliente",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"clienteId\":\"FLUJO-001\",\"nombre\":\"Roberto García\",\"identidad\":\"555666777\"}"
            },
            "url": {
              "raw": "http://localhost:3000/api/clientes",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "3000",
              "path": [
                "api",
                "clientes"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Paso 2a: Crear Producto Laptop",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"productoId\":\"PROD-LAPTOP\",\"nombre\":\"Laptop ASUS\",\"precio\":1200,\"exitencia\":5}"
            },
            "url": {
              "raw": "http://localhost:3000/api/productos",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "3000",
              "path": [
                "api",
                "productos"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Paso 2b: Crear Producto Mouse",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"productoId\":\"PROD-MOUSE\",\"nombre\":\"Mouse Logitech\",\"precio\":50,\"exitencia\":20}"
            },
            "url": {
              "raw": "http://localhost:3000/api/productos",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "3000",
              "path": [
                "api",
                "productos"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Paso 3: Crear Orden",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"ordenId\":\"FLUJO-ORD-001\",\"clienteId\":\"FLUJO-001\",\"subtotal\":0,\"impuesto\":0,\"total\":0}"
            },
            "url": {
              "raw": "http://localhost:3000/api/ordenes",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "3000",
              "path": [
                "api",
                "ordenes"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Paso 4a: Agregar 1 Laptop (1200 + 15% = 1380)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"cantidad\":1}"
            },
            "url": {
              "raw": "http://localhost:3000/api/ordenes/FLUJO-ORD-001/productos/PROD-LAPTOP",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "3000",
              "path": [
                "api",
                "ordenes",
                "FLUJO-ORD-001",
                "productos",
                "PROD-LAPTOP"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Paso 4b: Agregar 2 Mouse (100 + 15% = 115)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"cantidad\":2}"
            },
            "url": {
              "raw": "http://localhost:3000/api/ordenes/FLUJO-ORD-001/productos/PROD-MOUSE",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "3000",
              "path": [
                "api",
                "ordenes",
                "FLUJO-ORD-001",
                "productos",
                "PROD-MOUSE"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Paso 5: Ver Detalles (Subtotal: 1300, Impuesto: 195, Total: 1495)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:3000/api/ordenes/FLUJO-ORD-001/detalles",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "3000",
              "path": [
                "api",
                "ordenes",
                "FLUJO-ORD-001",
                "detalles"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Paso 6: Ver Orden (Subtotal: 1300, Impuesto: 195, Total: 1495)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:3000/api/ordenes/FLUJO-ORD-001",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "3000",
              "path": [
                "api",
                "ordenes",
                "FLUJO-ORD-001"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Paso 7: Verificar Stock de Mouse (debe ser 18)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:3000/api/productos/PROD-MOUSE",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "3000",
              "path": [
                "api",
                "productos",
                "PROD-MOUSE"
              ]
            }
          },
          "response": []
        }
      ]
    }
  ]
}